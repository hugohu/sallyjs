<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../assets/css/reset.css" />
    <link rel="stylesheet" href="layer.css" />
    <style>
#picshow img{
    max-width: 100%;
    opacity: 1;
    -webkit-perspective:600; 
    -webkit-transform:rotateY(0deg);
    -webkit-transform-style:preserve-3d; 
}
#picInfo{margin-top: 1100px;margin-left: 100px;}
#picInfo,#picshow{height:530px;width: 450px;border: 1px solid #ddd;}
#picshow{text-align: center;display:table-cell;vertical-align:middle;*font-family:Arial;*line-height:1;}
#picshow,#picshow img,.maskpic{
-webkit-transition:0.65s;   
}
#picshow{
    position: relative;
    z-index: 1111;
    border: 1px solid #fff;
}
.img-show #picshow{
    background-color: #fff;
    border: 1px solid #000;
/*  -webkit-transform: translate(200px,300px);*/
}
.img-show #picshow img{
    opacity: 0;
-webkit-transform:rotateY(180deg);
}
.img-show .m-masklayer{background: rgba(0,0,0,0.7);}
</style>
    <title>弹窗</title>
</head>
<body>

    <div id="picInfo">
        <div id="picshow" class="u-img">
            <img alt="" src="http://b.hiphotos.baidu.com/image/w%3D2048/sign=e32990b6eb50352ab1612208677bfaf2/2e2eb9389b504fc20cb82f04e7dde71191ef6dc8.jpg" data-index="1"></div>
    </div>
    <!-- 区块命名规范:id为 templ-模块名称
可配置变量 #{data}进行替换 -->
    <script type="text/html" id="templ-quick">
    <div class="m-layer" id="quick">
        <span class="close" data-event="close">×</span>
        <div class="lyct">
            <div id="loading"></div>
           hllow
        </div>
    </div>
</script>

    <script src="http://libs.baidu.com/jquery/1.8.2/jquery.min.js"></script>
    <script src="layer.js"></script>
    <script>
    //test
        $(function(){
            $.layer("img",{
                "start":function(){
                    //视窗高宽
                    var winW=$(window).width();
                    var winH=$(window).height();
                     //初始位置
                    var _ow= this.showbox.offset().left;
                    var _oh= this.showbox.offset().top;
                    //元素的宽高
                    var _W=this.showbox.width();
                    var _H=this.showbox.height();

                    var posL=winW/2-_W/2-_ow;
                     //滚动条的位置
                    var scrollTop = $(window).scrollTop();
                      console.log(scrollTop)
                    var _Top = scrollTop-_oh+100
                    console.log(_Top)
                    //var _Top = off.top - scrollTop;
                    this.showbox.css({
                        "left":posL,
                        "top":_Top
                    })
                },
                "closed":function(){
                   this.showbox.css({
                        "left":0,
                        "top":0
                    }) 
                }
            })
           $("#picInfo").on("click",function(){
            $(this).layer({"target":"picshow","type":"img","position":false})
           })
        })
    </script>
</body>
</html>